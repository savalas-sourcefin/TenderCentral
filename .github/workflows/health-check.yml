name: Daily Karate Health Check

on:
  schedule:
    - cron: '0 6 * * *'  # 6am UTC = 8am SAST
  workflow_dispatch:

jobs:
  run-karate-tests:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '19'

      - name: Run HealthCheckTest
        run: mvn test -Dtest=HealthCheckTest#testHealthCheck

      - name: Run ConstantsTestRunner
        run: mvn test -Dtest=ConstantsTestRunner#runAllConstantsTests
